/* ===== Theme ===== */
:root{
  --page-bg:#f8fafc;
  --ink:#0b0f12;
  --text:#0f172a;
  --muted:#64748b;

  --teal:#4BC3B7;
  --teal-700:#0f766e;

  --card:#fff;
  --card-border:#e6edf2;
  --shadow:0 12px 30px rgba(2,6,23,.08);
}

body{ background:var(--page-bg); color:var(--text); margin:0; }
*{ box-sizing:border-box; }

/* ===== Shell / header ===== */
.result-shell{
  max-width:1080px;
  margin:24px auto 48px;
  padding:0 16px;
  font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
}
.result-header{
  display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:10px;
}
.result-title{
  margin:0; font-size:28px; font-weight:900; letter-spacing:.2px; color:var(--teal-700);
}
.result-meta{
  font-size:12px; color:#475569; font-weight:700; text-align:right;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:60%;
}

/* Small toast */
.toast{
  background:#111827; color:#fff; font-weight:800; font-size:12px;
  padding:8px 12px; border-radius:10px; display:inline-block; margin-bottom:10px;
  box-shadow:0 8px 20px rgba(0,0,0,.18);
}

/* ===== Tabs ===== */
.tabbar{ display:flex; gap:8px; margin:8px 0 16px; }
.tab{
  appearance:none; border:1.5px solid var(--card-border); background:#fff;
  color:#0f172a; font-weight:800; padding:8px 12px; border-radius:12px; cursor:pointer;
}
.tab.active{ background:var(--teal); color:#fff; border-color:#34b8ac; }
.tab:active{ transform:translateY(1px); }

/* ===== Panels ===== */
.panel{ display:block; }
.panel-title{ margin:0 0 10px; font-size:18px; font-weight:900; color:var(--teal-700); }

/* ===== Summary card (toolbar aligned at top) ===== */
.summary-card{
  background:var(--card); border:1px solid var(--card-border);
  border-radius:14px; box-shadow:var(--shadow);
  padding:16px; line-height:1.6; white-space:pre-wrap;
}
.summary-row{
  display:flex; justify-content:flex-end; align-items:center; margin-bottom:8px;
}
.summary-actions{ display:flex; gap:6px; }
.summary-content{ color:#0f172a; }

/* ===== Empty state ===== */
.empty{
  text-align:center; background:#fff; border:1px dashed #d7e3ea; padding:18px; border-radius:12px;
  color:#5b6b7f; font-weight:700;
}
.cta{
  display:inline-block; margin-top:10px; text-decoration:none; font-weight:900;
  background:#fff; border:1.5px solid var(--card-border); color:#0b0f12; border-radius:12px; padding:8px 12px;
}

/* ===== Flashcards toolbar ===== */
.fc-toolbar{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  background:#fff; border:1.5px solid var(--card-border); border-radius:14px; box-shadow:var(--shadow);
  padding:10px 12px;
}
.fc-left{ display:flex; align-items:center; gap:12px; }
.fc-count{
  font-weight:900; font-size:12px; color:#334155; background:#f1f5f9; border-radius:999px; padding:4px 8px;
}

.fc-subtabs{ display:flex; gap:6px; }
.sub{
  appearance:none; border:none; background:#f7f9fb; color:#334155;
  font-weight:900; padding:8px 10px; border-radius:10px; cursor:pointer;
}
.sub.active{ background:var(--teal); color:#fff; }

.fc-actions{ display:flex; gap:8px; align-items:center; }

/* Generator UI */
.gen-group{ display:flex; align-items:center; gap:6px; }
.gen-select{
  appearance:none; border:1.5px solid var(--card-border); background:#fff; color:#0f172a;
  padding:6px 10px; border-radius:10px; font-weight:800; min-width:64px;
}

/* Buttons */
.btn{
  appearance:none; border:1.5px solid var(--card-border); background:#fff; color:#0f172a;
  font-weight:900; padding:8px 12px; border-radius:12px; cursor:pointer;
}
.btn.ghost{ background:#f7f9fb; color:#334155; }
.btn.primary{ background:var(--teal); color:#fff; border-color:#2fb0a4; }
.btn:active{ transform:translateY(1px); }
.btn:disabled{ opacity:.6; cursor:default; }
.btn.mini{ padding:6px 10px; border-radius:10px; font-size:12px; }

/* ===== Grid ===== */
.fc-grid{
  display:grid; grid-template-columns:repeat(3,1fr); gap:14px; margin-top:14px; padding:0; list-style:none;
}
@media (max-width:980px){ .fc-grid{ grid-template-columns:repeat(2,1fr); } }
@media (max-width:640px){ .fc-grid{ grid-template-columns:1fr; } }

.fc-card{ margin:0; display:flex; flex-direction:column; gap:8px; }
.fc-card-inner{
  width:100%; min-height:156px; border-radius:14px; position:relative; cursor:pointer;
  border:1px solid var(--card-border); background:#fff; box-shadow:var(--shadow);
  transform-style:preserve-3d; transition:transform .5s ease;
}
.fc-card-inner.is-flipped{ transform:rotateY(180deg); }

.fc-face{
  position:absolute; inset:0; padding:14px 16px; display:grid; grid-template-rows:auto 1fr auto;
  border-radius:14px; backface-visibility:hidden;
}
.fc-front{ background:#fff; color:#0f172a; }
.fc-back{  background:#0f172a; color:#e5e7eb; transform:rotateY(180deg); }

.fc-label{ font-size:12px; font-weight:900; letter-spacing:.08em; color:var(--teal-700); }
.fc-back .fc-label{ color:#a7f3d0; }
.fc-text{ margin:6px 0 8px; font-size:15px; line-height:1.55; }
.fc-hint{ font-size:12px; color:#94a3b8; }
.fc-back .fc-hint{ color:#a3b2c5; }

/* Busy overlay & spinner on card */
.busy-overlay{
  position:absolute; inset:0; background:rgba(15,23,42,.08);
  display:flex; align-items:center; justify-content:center;
  border-radius:14px; z-index:2;
  pointer-events:auto;
}
.spinner{
  width:26px; height:26px; border-radius:999px;
  border:3px solid rgba(15,23,42,.2);
  border-top-color: var(--teal);
  animation: spin .9s linear infinite;
}
@keyframes spin{ to { transform: rotate(360deg); } }

/* Row actions under each card */
.fc-row-actions{ display:flex; gap:8px; flex-wrap:wrap; }
.fc-row-actions .btn{ box-shadow:var(--shadow); }

/* Inline editor */
.fc-edit{
  background:#fff; border:1.5px solid var(--card-border); border-radius:12px; box-shadow:var(--shadow);
  padding:12px; display:flex; flex-direction:column; gap:8px;
}
.fc-edit label{
  font-weight:900; font-size:12px; color:#334155;
}
.fc-edit textarea{
  width:100%; min-height:70px; border:1px solid #d7e3ea; border-radius:10px; padding:8px 10px;
  font:inherit; resize:vertical;
}
.fc-edit-actions{ display:flex; gap:8px; }

/* ===== Study mode ===== */
.study-area{ margin-top:14px; }
.study-card{
  background:#fff; border:1.5px solid var(--card-border); border-radius:14px; box-shadow:var(--shadow);
  padding:18px; text-align:center;
}
.study-label{ font-weight:900; font-size:12px; color:#334155; margin-bottom:6px; }
.study-q{ font-weight:900; font-size:18px; margin-bottom:10px; color:#0f172a; }
.study-a{
  margin:10px auto 12px; max-width:800px; line-height:1.6; background:#0f172a; color:#e5e7eb;
  padding:14px 16px; border-radius:12px;
}
.study-actions{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap; }
.btn.wrong{ background:#ef4444; color:#fff; border-color:#ef4444; }
.btn.correct{ background:#10b981; color:#fff; border-color:#10b981; }
.study-stats{ margin-top:10px; display:flex; gap:14px; justify-content:center; color:#0f766e; font-weight:900; }

.study-done{
  background:#fff; border:1.5px solid var(--card-border); border-radius:14px; box-shadow:var(--shadow);
  padding:24px; text-align:center;
}
.done-title{ font-size:20px; font-weight:900; margin-bottom:8px; color:#0f172a; }
.done-stats{ display:flex; gap:18px; justify-content:center; font-weight:900; color:#0f766e; }
.done-actions{ margin-top:12px; display:flex; gap:10px; justify-content:center; }

/* ===== Alerts & Undo ===== */
.alert{
  margin-top:12px;
  display:flex; align-items:center; gap:10px;
  padding:10px 12px; border-radius:12px; border:1.5px solid;
  font-weight:800;
}
.alert.info{ background:#f0f9ff; color:#075985; border-color:#cff0ff; }
.alert.warn{ background:#fff7ed; color:#9a3412; border-color:#fde7d4; }
.alert.error{ background:#fef2f2; color:#991b1b; border-color:#fecaca; }
.alert .alert-close{
  margin-left:auto; appearance:none; border:none; background:transparent; cursor:pointer;
  font-size:16px; line-height:1; color:inherit;
}

.undo-bar{
  margin-top:10px;
  position: sticky; top: 8px; z-index: 5;
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  background:#ecfeff; color:#155e75; border:1.5px solid #bae6fd; border-radius:12px;
  padding:10px 12px; font-weight:800;
}
.undo-actions{ display:flex; gap:8px; }

/* ===== Decks list ===== */
.deck-list{
  margin:0; padding:0; list-style:none; display:flex; flex-direction:column; gap:10px;
}
.deck-item{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  background:#fff; border:1.5px solid var(--card-border); border-radius:14px; box-shadow:var(--shadow);
  padding:12px 14px;
}
.deck-main{ display:flex; flex-direction:column; gap:4px; }
.deck-name{ font-weight:900; color:#0f172a; }
.deck-meta{ font-size:12px; color:#64748b; display:flex; gap:8px; flex-wrap:wrap; }
.deck-actions{ display:flex; gap:8px; flex-wrap:wrap; }

/* ===== Review progress ===== */
.progress-wrap{
  margin:12px 0 8px; height:10px; border-radius:999px;
  background:#e2e8f0; overflow:hidden;
  border:1px solid var(--card-border);
}
.progress-bar{
  height:100%;
  background:var(--teal);
  transition: width .25s ease;
}

/* ===== NEW: due badge on deck row ===== */
.badge-due{
  margin-left:6px;
  font-size:11px; font-weight:900; padding:2px 6px;
  background:var(--teal); color:#fff; border-radius:999px;
}

/* ===== NEW: search field & large spinner ===== */
.search-input{
  appearance:none; border:1.5px solid var(--card-border); background:#fff; color:#0f172a;
  padding:6px 10px; border-radius:10px; font:inherit; min-width:180px;
}
.spinner-lg{
  width:18px; height:18px; border-radius:999px;
  border:3px solid rgba(15,23,42,.2); border-top-color:var(--teal);
  animation:spin .9s linear infinite; display:inline-block;
  vertical-align:middle;
}
/* ===== Usage page ===== */
.seg{ display:flex; gap:6px; background:#f1f5f9; padding:4px; border-radius:12px; border:1px solid var(--card-border); }
.seg-btn{
  appearance:none; border:none; background:transparent; padding:6px 10px; border-radius:8px;
  font-weight:900; color:#334155; cursor:pointer;
}
.seg-btn.active{ background:#fff; color:#0f172a; border:1px solid var(--card-border); }

.usage-cards{
  margin-top:12px; display:grid; grid-template-columns:repeat(4,1fr); gap:12px;
}
@media (max-width:820px){ .usage-cards{ grid-template-columns:repeat(2,1fr); } }
@media (max-width:520px){ .usage-cards{ grid-template-columns:1fr; } }
.usage-card{
  background:#fff; border:1.5px solid var(--card-border); border-radius:14px; box-shadow:var(--shadow);
  padding:12px;
}
.uc-title{ font-size:12px; color:#64748b; font-weight:900; }
.uc-value{ font-size:20px; font-weight:900; color:#0f172a; margin-top:4px; }

.usage-table{
  margin-top:12px; border:1.5px solid var(--card-border); border-radius:14px; overflow:hidden; background:#fff; box-shadow:var(--shadow);
}
.ut-head{ background:#f8fafc; color:#334155; font-weight:900; }
.ut-row{
  display:grid; grid-template-columns: 1.2fr .9fr 1fr .8fr .9fr .9fr .7fr 1.4fr;
  gap:0; padding:10px 12px; border-top:1px solid var(--card-border); align-items:center;
  font-size:13px;
}
.ut-row:first-child{ border-top:none; }
.ut-strong{ font-weight:900; color:#0f172a; }
.ut-action{ font-weight:900; color:#0f766e; }
.ut-mono{ font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace; font-size:12px; color:#334155; }