/* Upload Page - responsive card that expands with content */

:root{
  --up-bg: var(--db-bg, #F6F6F7);
  --up-fg: var(--db-fg, #1B1B1F);
  --up-muted: var(--db-muted, #6B7280);
  --up-card: var(--db-card, #FFFFFF);
  --up-accent: var(--db-accent, #4BC3B7);
  --up-accent-soft: var(--db-accent-weak, rgba(75,195,183,.18));
  --up-ring: var(--db-ring, rgba(75,195,183,.35));
  --up-soft: #F9FBFB;
  --up-success: #22C55E;

  --up-radius-lg: var(--db-radius, 18px);
  --up-shadow: 0 10px 30px rgba(0,0,0,.06), 0 2px 10px rgba(0,0,0,.04);

  /* Heights now MIN heights so the card can grow with content */
  --up-dz-min-desktop: 340px;
  --up-dz-min-mobile: 360px;

  --up-pad-desktop: 24px;
  --up-pad-mobile: 16px;
}

/* Page shell */
.up-page[data-page="upload"]{
  height: 100dvh;
  background: var(--up-bg);
  color: var(--up-fg);
  display: grid;
  grid-template-rows: auto 1fr;
  padding: calc(env(safe-area-inset-top) + var(--up-pad-mobile))
           var(--up-pad-mobile)
           calc(env(safe-area-inset-bottom) + var(--up-pad-mobile));
  /* allow the page to scroll if inner content grows */
  overflow: auto;
}
@media (min-width: 768px){
  .up-page[data-page="upload"]{ padding: var(--up-pad-desktop); }
}

/* Header */
.up-header{
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: end;
  gap: 12px;
  margin-bottom: 12px;
}
.up-head-text{display:flex;flex-direction:column;align-items:center;text-align:center}
.up-title{margin:0 0 4px;font-weight:800;letter-spacing:-.01em;font-size:clamp(18px,2.2vw,24px)}
.up-subtitle{margin:0;color:var(--up-muted);font-size:13px}

.up-back,.up-help{
  display:inline-flex;align-items:center;gap:8px;text-decoration:none;font-size:14px;
  padding:10px 12px;border-radius:12px;border:1px solid var(--up-accent-soft);
}
.up-back{background:#EEF7F6;color:var(--up-fg)}
.up-help{background:#ffffff80;color:#0b7f76}
.up-back:focus-visible,.up-help:focus-visible{outline:0;box-shadow:0 0 0 3px var(--up-ring)}

/* Main region */
.up-main{
  display: grid;
  justify-items: center;
  /* start at top; if the card grows, it pushes downward */
  align-content: start;
  gap: 14px;
  height: 100%;
  /* allow children to expand and the page to scroll */
  overflow: visible;
}

/* Card shell */
.up-card{
  background: var(--up-card);
  border-radius: var(--up-radius-lg);
  border: 1px solid var(--up-accent-soft);
  box-shadow: var(--up-shadow);
}

/* Dropzone */
.up-dz{
  width: min(940px, 100%);
  /* MIN height so the card can grow when content needs more space */
  min-height: var(--up-dz-min-desktop);
  height: auto;
  padding: clamp(18px, 3.6vw, 28px);
  position: relative;
  display: grid;
  place-items: stretch;
}
@media (max-width: 640px){
  .up-dz{ min-height: var(--up-dz-min-mobile); }
}

/* Inner dashed container */
.up-dz-inner{
  width: 100%;
  max-width: 900px;
  /* allow growth instead of fixed */
  min-height: 100%;
  height: auto;
  border: 1.5px dashed rgba(3,105,98,.26);
  border-radius: calc(var(--up-radius-lg) - 6px);
  background: linear-gradient(180deg, #fff, #fbfefd);
  display: grid;
  grid-template-rows: auto 1fr auto;
  align-items: center;
  justify-items: center;
  padding: clamp(16px, 2.6vw, 24px);
  text-align: center;
  transition: border-color .16s ease, box-shadow .16s ease, transform .16s ease;
}
.up-dz.is-active .up-dz-inner{
  transform: translateY(-2px);
  border-color: rgba(3,105,98,.45);
  box-shadow: 0 0 0 3px var(--up-accent-soft), var(--up-shadow);
}

/* Idle */
.up-dz-idle{
  display: grid;
  align-content: center;
  justify-items: center;
  gap: 10px;
}
.up-icon{ width: 64px; height: 64px; opacity: .95; }
.up-h1{margin:0;font-size:clamp(18px,2vw,22px);font-weight:800;letter-spacing:-.01em}
.up-h2{margin:0;color:var(--up-muted);font-size:13.5px}

.up-actions{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
.up-btn{
  appearance:none;border:1px solid transparent;background:transparent;color:var(--up-fg);
  padding:10px 12px;border-radius:12px;font-size:14px;line-height:1;cursor:pointer;
  display:inline-flex;align-items:center;gap:8px;text-decoration:none;
}
.up-btn.primary{background:var(--up-accent);color:#063a37;font-weight:600}
.up-btn.secondary{background:#EEF7F6;border:1px solid var(--up-accent-soft)}
.up-formats{margin:0;color:var(--up-muted);font-size:12.5px}

/* Progress â€“ no longer absolutely positioned; lets card grow */
.up-dz-progress{
  position: relative; /* static flow */
  width: 100%;
  display:grid; grid-template-rows:auto 1fr auto; gap:12px;
}
.up-progress-title{margin:0;font-size:15px;font-weight:700}
.up-steps{display:grid;gap:8px;background:var(--up-soft);border:1px solid var(--up-accent-soft);border-radius:12px;padding:10px}
.up-step{
  display:grid;grid-template-columns:24px 1fr auto;gap:10px;align-items:center;
  padding:8px 10px;border-radius:10px;border:1px solid var(--up-accent-soft);background:#fff;
}
.up-step-label{font-size:14px}
.up-step-hint{font-size:12px;color:var(--up-muted)}
.up-pill{font-size:12px;padding:4px 8px;border-radius:999px;border:1px solid var(--up-accent-soft);background:#fff;color:var(--up-muted)}
.up-step--done .up-pill{color:var(--up-success);border-color:rgba(34,197,94,.3)}

.up-bar-wrap{height:8px;border-radius:999px;background:#EEF2F3;border:1px solid #e5e7eb;overflow:hidden}
.up-bar{height:100%;width:0%;border-radius:999px;background:linear-gradient(90deg,var(--up-accent),#8fe1d8);transition:width .28s ease}

.up-success{
  display:flex;align-items:center;justify-content:space-between;gap:12px;
  padding:10px;border-radius:10px;border:1px solid rgba(34,197,94,.28);background:#f3fff8;
}

.up-error{
  display:flex;align-items:center;justify-content:space-between;gap:12px;
  padding:10px;border-radius:10px;border:1px solid rgba(239,68,68,.28);background:#fef2f2;
}

/* Message states */
.message{
  margin-top:12px;padding:8px 12px;border-radius:8px;font-size:13px;
}
.error-message{
  background:#fef2f2;color:#dc2626;border:1px solid rgba(239,68,68,.28);
}
.success-message{
  background:#f3fff8;color:#059669;border:1px solid rgba(34,197,94,.28);
}
.warning-message{
  background:#fffbeb;color:#d97706;border:1px solid rgba(245,158,11,.28);
}

/* Disabled button states */
.up-btn:disabled{
  opacity:0.6;cursor:not-allowed;
}

/* File Selection & Processing Level Styles */
.up-dz-level-select{
  position: relative;
  width: 100%;
  display: grid;
  gap: 20px;
  align-content: start;
  padding: 4px 0;
}

.up-file-selected{
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--up-soft);
  border: 1px solid var(--up-accent-soft);
  border-radius: 12px;
}

.up-file-icon{
  flex-shrink: 0;
  width: 24px;
  height: 24px;
  color: var(--up-accent);
}

.up-file-info{
  flex-grow: 1;
}

.up-file-name{
  margin: 0 0 4px;
  font-size: 14px;
  font-weight: 600;
  color: var(--up-fg);
}

.up-file-size{
  margin: 0;
  font-size: 12px;
  color: var(--up-muted);
}

.up-level-actions{
  display: flex;
  gap: 12px;
  justify-content: center;
  flex-wrap: wrap;
}

/* Processing Selector Styles */
.processing-selector{
  width: 100%;
}

.processing-selector__title{
  margin: 0 0 8px;
  font-size: 16px;
  font-weight: 700;
  color: var(--up-fg);
}

.processing-selector__description{
  margin: 0 0 16px;
  font-size: 13px;
  color: var(--up-muted);
}

.processing-selector__options{
  display: grid;
  gap: 12px;
}

.processing-option{
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 12px;
  align-items: start;
  padding: 16px;
  border: 1.5px solid transparent;
  border-radius: 12px;
  background: #fff;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
}

.processing-option:hover{
  border-color: var(--up-accent-soft);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

.processing-option--selected{
  border-color: var(--up-accent);
  background: linear-gradient(135deg, rgba(75,195,183,0.08), rgba(75,195,183,0.04));
}

.processing-option__input{
  position: absolute;
  opacity: 0;
  pointer-events: none;
}

.processing-option__content{
  display: grid;
  gap: 8px;
}

.processing-option__header{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.processing-option__name{
  margin: 0;
  font-size: 15px;
  font-weight: 700;
  color: var(--up-fg);
}

.processing-option__cost{
  font-size: 12px;
  font-weight: 600;
  color: var(--up-accent);
  padding: 4px 8px;
  background: var(--up-accent-soft);
  border-radius: 6px;
}

.processing-option__description{
  margin: 0;
  font-size: 13px;
  color: var(--up-muted);
}

.processing-option__details{
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
}

.processing-option__time{
  font-size: 12px;
  color: var(--up-muted);
}

.processing-option__features{
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.processing-option__feature{
  font-size: 11px;
  padding: 2px 6px;
  background: #f1f5f9;
  border-radius: 4px;
  color: #64748b;
}

.processing-option__indicator{
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  color: var(--up-muted);
  transition: color 0.2s ease;
}

.processing-option--selected .processing-option__indicator{
  color: var(--up-accent);
}

/* Mobile responsive adjustments */
@media (max-width: 640px){
  .up-dz-level-select{
    gap: 16px;
  }
  
  .processing-option{
    padding: 14px;
  }
  
  .processing-option__header{
    flex-direction: column;
    align-items: start;
    gap: 8px;
  }
  
  .up-level-actions{
    flex-direction: column-reverse;
  }
  
  .up-level-actions .up-btn{
    width: 100%;
    justify-content: center;
  }
}

/* Info chips row and popovers (unchanged styles) */
.up-info-row{
  position: relative;
  width: min(940px, 100%);
  display:flex;gap:8px;justify-content:center;align-items:center;
}
.up-chip{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;
  border:1px solid var(--up-accent-soft);background:#fff;font-size:12.5px;color:var(--up-muted);
}
.up-chip svg{opacity:.8}
.up-pop{position:relative}
.up-pop > summary{list-style:none;cursor:pointer}
.up-pop > summary::-webkit-details-marker{display:none}
.up-pop[open] > summary{outline:0}
.up-pop-panel{
  position:absolute; left:50%; bottom:calc(100% + 8px); transform:translateX(-50%);
  min-width: 240px; max-width: 320px; z-index: 5;
  background:#fff; color:var(--up-fg); border:1px solid var(--up-accent-soft); border-radius:12px; box-shadow:var(--up-shadow);
  padding:10px;
}
.up-pop-title{margin:0 0 6px;font-size:13px;color:var(--up-muted)}
.up-pop-list{margin:0;padding:0;list-style:none;display:grid;gap:6px}
.up-dot{width:8px;height:8px;border-radius:999px;background:var(--up-accent)}
.up-row{display:flex;align-items:center;gap:8px;font-size:12.5px}

/* Spinner */
@keyframes up-spin{to{transform:rotate(360deg)}}
.up-spin{animation: up-spin 1s linear infinite; transform-origin:center}

/* Accessibly hidden input */
.up-visually-hidden{
  position:absolute!important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0 0 0 0);white-space:nowrap;border:0;
}

/* Mobile sticky CTA */
.up-sticky{ display:none; }
@media (max-width:640px){
  .up-sticky{
    display:grid; position:fixed; left:0; right:0; bottom:0; z-index:10;
    padding:10px 12px calc(10px + env(safe-area-inset-bottom));
    background: linear-gradient(180deg, rgba(246,246,247,0), rgba(246,246,247,0.9) 28%, rgba(246,246,247,1));
    border-top:1px solid var(--up-accent-soft);
  }
  .up-sticky .up-btn{width:100%; justify-content:center}
}