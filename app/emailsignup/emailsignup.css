/* Adaptaly Email Signup — safe-area ready, compact, scroll-free on typical laptops */

:root{
  --primary:#4BC3B7;
  --text:#1B1B1F;
  --muted:#6b7280;
  --bg:#f6f6f7;
  --error:#e5484d;
  --ok:#22c55e;
  --ring: rgba(75,195,183,0.35);
}

html, body{
  margin:0;
  padding:0;
  height:100%;
  color:var(--text);
  font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  background:var(--bg);
}

/* Page container — shave a few px to kill the “5% scrollbar” edge case
   + add safe-area padding so content never sits under a notch/home bar */
.es-background{
  min-height:calc(100svh - 8px);
  display:flex;
  align-items:center;
  justify-content:center;
  /* Padding respects device cutouts while staying compact on normal screens */
  padding:
    max(18px, calc(env(safe-area-inset-top) + 10px))
    max(18px, calc(env(safe-area-inset-right) + 12px))
    max(18px, calc(env(safe-area-inset-bottom) + 12px))
    max(18px, calc(env(safe-area-inset-left) + 12px));
  box-sizing:border-box;
}

/* Card */
.es-card{
  width:100%;
  max-width:clamp(360px, 36vw, 540px);
  background:#fff;
  border-radius:18px;
  box-shadow:0 10px 30px rgba(0,0,0,.07), 0 2px 10px rgba(0,0,0,.05);
  padding:16px 20px 12px;   /* compact to avoid overflow */
  box-sizing:border-box;
  position:relative;
}

/* Back pill (button) — default absolute for roomy screens */
.es-topbar{
  position:absolute;
  left:max(14px, calc(env(safe-area-inset-left) + 8px));
  top:max(12px, calc(env(safe-area-inset-top) + 6px));
}
.es-back{
  appearance:none; -webkit-appearance:none;
  display:inline-flex; align-items:center; gap:6px;
  padding:6px 10px;
  border:1px solid rgba(0,0,0,.10);
  border-radius:999px;
  background:#fff;
  color:#374151;
  font-size:14px;
  cursor:pointer;
  transition:background-color .18s ease, box-shadow .18s ease, transform .18s ease;
}
.es-back:hover{ background:#f3f4f6; box-shadow:0 2px 8px rgba(0,0,0,.06); transform:translateY(-1px); }
.es-back:focus-visible{ outline:none; box-shadow:0 0 0 3px var(--ring); }

/* Header */
.es-head{ text-align:center; padding-top:12px; }
.es-title{
  margin:0;
  font-size:clamp(23px, 2.6vw, 27px);
  font-weight:800;
  letter-spacing:-.01em;
  color:#0B0B0F;
}
.es-subtitle{
  margin:8px auto 0;
  color:var(--muted);
  font-size:14.5px;
  line-height:1.5;
  max-width:42ch;
}

/* Alert (validation summary) */
.es-alert{
  margin:8px auto 0;
  padding:9px 11px;
  background:#fff0f0;
  border:1px solid rgba(229,72,77,.3);
  color:#9f1d22;
  border-radius:10px;
  font-size:14px;
}

/* Form — compact rhythm (no internal scrolling) */
.es-form{ display:flex; flex-direction:column; }

/* Field stack */
.es-field{ margin:10px 0; }
.es-label{ display:block; margin-bottom:6px; font-weight:700; }

/* Inputs */
.es-input-wrap{
  position:relative;
  border:1px solid rgba(0,0,0,.12);
  border-radius:12px;
  background:#fff;
  transition:border-color .18s ease, box-shadow .18s ease;
}
.es-input{
  width:100%;
  height:44px;                      /* compact but comfortable */
  padding:0 14px;
  border:0;
  background:transparent;
  color:var(--text);
  font-size:15px;
  outline:none;
}
.es-input:focus{ box-shadow:0 0 0 3px var(--ring); }
.es-input-wrap.is-invalid{ border-color:rgba(229,72,77,.6); }
.es-input.has-icon{ padding-left:38px; }
.es-input.has-trailing{ padding-right:42px; }

.es-input-icon{
  position:absolute;
  left:12px; top:50%; transform:translateY(-50%);
  color:#6b7280;
  pointer-events:none;
}

/* Valid tick on right */
.es-valid-icon{
  position:absolute; right:10px; top:50%; transform:translateY(-50%);
  color:var(--ok);
}
.es-input-wrap.is-valid:not(.is-invalid){ border-color:rgba(34,197,94,.55); }

/* Show/Hide password — perfectly centered, no weird shadow */
.es-toggle{
  appearance:none; -webkit-appearance:none;
  display:grid; place-items:center;
  position:absolute; right:6px; top:50%; transform:translateY(-50%);
  width:30px; height:30px;
  border:0; border-radius:50%;
  background:transparent;
  color:#6b7280;
  cursor:pointer;
  box-shadow:none;
}
.es-toggle svg{ display:block; }
.es-toggle:hover{ background:rgba(0,0,0,.06); box-shadow:none; }
.es-toggle:focus-visible{ outline:none; box-shadow:0 0 0 3px var(--ring); }

/* Hints + errors */
.es-hint{ margin-top:4px; font-size:13px; color:#6b7280; }
.es-input-wrap.is-invalid + .es-hint{ color:var(--error); }

/* Email suggestion */
.es-suggest{ margin-top:6px; font-size:13px; color:#374151; }
.es-suggest-btn{
  border:0; background:transparent; cursor:pointer;
  color:var(--primary); text-decoration:underline; padding:0 2px;
}
.es-suggest-btn:hover{ text-decoration:none; }

/* Caps lock note + rule checks */
.es-caps{
  margin-top:6px; font-size:13px; color:#9a6b00;
  background:#fff7e6; border:1px solid #ffe0a6;
  padding:7px 9px; border-radius:10px;
}
.es-checks{
  display:grid; gap:3px; margin:6px 0 0; padding-left:18px;
  font-size:13px;
}
.es-checks li{
  position:relative; list-style:none; padding-left:16px; color:#6b7280;
}
.es-checks li::before{
  content:''; position:absolute; left:0; top:50%; transform:translateY(-50%);
  width:10px; height:10px; border-radius:50%; border:2px solid #9ca3af;
}
.es-checks li.ok{ color:var(--ok); }
.es-checks li.ok::before{ border-color:var(--ok); background:var(--ok); }

/* Password strength — extra slim */
.es-strength{ display:flex; align-items:center; gap:8px; margin-top:6px; min-height:6px; }
.es-strength .bar{
  height:4px; flex:1; border-radius:999px;
  background:linear-gradient(90deg,#ffd1d1,#ffe3a6,#c3f0c8,#9ae6b4);
  position:relative; overflow:hidden;
}
.es-strength .bar::after{
  content:''; position:absolute; top:0; left:0; bottom:0; width:12%;
  background:linear-gradient(90deg,#ff6b6b,#ffcc66,#41afa4,#22c55e);
  border-radius:999px; transition:width .25s ease;
}
.es-strength .label{ font-size:12px; color:#6b7280; min-width:52px; text-align:right; }
.es-strength .s-0::after{ width:12%; }
.es-strength .s-1::after{ width:30%; }
.es-strength .s-2::after{ width:55%; }
.es-strength .s-3::after{ width:80%; }
.es-strength .s-4::after{ width:100%; }

/* Legal + CTA */
.es-legal{ margin-top:8px; font-size:13px; color:#6b7280; }
.es-legal a{ color:var(--primary); text-decoration:none; }
.es-legal a:hover{ text-decoration:underline; }

.es-actions{ margin-top:10px; }
.es-btn-primary{
  position:relative;
  display:inline-flex; align-items:center; justify-content:center;
  width:100%; height:48px;
  border-radius:12px; border:1px solid transparent;
  background:var(--primary); color:#fff; font-weight:800; letter-spacing:.15px;
  transition:background-color .18s ease, transform .18s ease, box-shadow .18s ease;
}
.es-btn-primary:hover{ background:#41afa4; transform:translateY(-1px); box-shadow:0 10px 26px rgba(75,195,183,.22); }
.es-btn-primary:active{ transform:translateY(1px); }
.es-btn-primary:focus-visible{ outline:none; box-shadow:0 0 0 3px var(--ring); }
.es-btn-primary:disabled{ opacity:.6; pointer-events:none; }

.es-spinner{
  margin-left:10px; width:16px; height:16px; border-radius:50%;
  border:2px solid rgba(255,255,255,.55); border-top-color:#fff;
  animation:es-spin .8s linear infinite;
}
@keyframes es-spin{ to{ transform:rotate(360deg); } }

/* Footer */
.es-footer{
  margin-top:10px;
  display:flex; align-items:center; justify-content:center; gap:8px;
  font-size:15px; color:#6b7280;
}
.link{ color:var(--primary); text-decoration:none; }
.link:hover{ text-decoration:underline; }
.small{ opacity:.95; }

/* --- MOBILE FIX: prevent Back button overlapping the title --- */
@media (max-width:640px){
  /* Put the back button in normal flow so it stacks above the header */
  .es-topbar{
    position:static;
    left:auto; top:auto;
    margin-bottom:12px;
  }

  /* Remove top padding on header now that back button is stacked */
  .es-head{ padding-top:0; }

  /* Slightly smaller title + wrap safety */
  .es-title{
    font-size:22px;
    line-height:1.25;
    word-break:break-word;
  }
}

/* Mobile tweaks — also respect safe-area on very small screens */
@media (max-width:420px){
  .es-background{
    padding:
      max(14px, calc(env(safe-area-inset-top) + 8px))
      max(14px, calc(env(safe-area-inset-right) + 10px))
      max(14px, calc(env(safe-area-inset-bottom) + 10px))
      max(14px, calc(env(safe-area-inset-left) + 10px));
  }
  .es-card{ padding:14px; }
  .es-input{ height:42px; }
  .es-btn-primary{ height:46px; }
}

/* Reduced motion */
@media (prefers-reduced-motion:reduce){
  .es-btn-primary{ transition:background-color 100ms ease; }
  .es-strength .bar::after{ transition:none; }
}

/* Keep the top bar from overlapping text on small screens */
.es-topbar.es-topbar--safe {
  position: relative;
  z-index: 1;
  margin-bottom: 6px;
}

/* Confirmation layout */
.es-head--confirm {
  margin-top: 6px;
}

.es-provider-actions {
  margin-top: 16px;
}

.es-provider-hint {
  font-size: 14px;
  color: #6b7280;
  margin: 0 0 8px 0;
}

.es-provider-buttons {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.es-btn-secondary {
  appearance: none;
  border: 1px solid rgba(0,0,0,0.12);
  background: #fff;
  border-radius: 10px;
  padding: 10px 14px;
  font-weight: 600;
  line-height: 1;
  cursor: pointer;
  text-decoration: none;
  color: #0b0b0f;
  transition: transform 150ms ease, box-shadow 150ms ease, border-color 150ms ease, background-color 150ms ease;
}

.es-btn-secondary:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 18px rgba(0,0,0,0.07);
  border-color: rgba(0,0,0,0.16);
}

.es-btn-secondary.is-suggested {
  border-color: #4BC3B7;
  background: color-mix(in srgb, #4BC3B7 8%, white);
}

.es-provider-note {
  margin-top: 8px;
  color: #6b7280;
  font-size: 13px;
}